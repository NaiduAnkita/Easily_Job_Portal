
<article class="job-detail">
  <header>
    <h2><%= job.jobdesignation %></h2>
    <span class="badge"><%= job.jobcategory %></span>
  </header>
  <p class="muted"><%= job.companyname %> â€¢ <%= job.joblocation %></p>
  <ul class="meta">
    <li>Salary: <strong><%= job.salary %></strong></li>
    <li>Apply by: <strong><%= job.applyby %></strong></li>
    <li>Openings: <strong><%= job.numberofopenings %></strong></li>
    <li>Skills: <%= job.skillsrequired.join(', ') %></li>
  </ul>

  <div class="actions">
    <button class="btn btn-primary" data-open="#applyModal">Apply now</button>
    <% if (user && user.id === job.ownerId) { %>
      <a class="btn btn-secondary" href="/jobs/<%= job.id %>/update">Update</a>
      <a class="btn btn-danger confirm-delete" href="/jobs/<%= job.id %>/delete">Delete</a>
      <a class="btn" href="/jobs/<%= job.id %>/applicants">View applicants</a>
    <% } %>
  </div>

  <% if (errors && errors.length) { %>
    <div class="alert">
      <ul>
        <% errors.forEach(e => { %><li><%= e.msg %></li><% }) %>
      </ul>
    </div>
  <% } %>

  <dialog id="applyModal">
    <form method="post" action="/apply/<%= job.id %>" enctype="multipart/form-data">
      <h3>Apply to <%= job.jobdesignation %></h3>
      <label>Name <input name="name" required /></label>
      <label>Email <input name="email" type="email" required /></label>
      <label>Contact <input name="contact" required /></label>
      <label>Resume (PDF) <input name="resume" type="file" accept="application/pdf" required /></label>
      <div class="modal-actions">
        <button class="btn btn-primary" type="submit">Submit</button>
        <button class="btn" type="button" data-close>Cancel</button>
      </div>
    </form>
  </dialog>
</article>
