<section class="jobs-header">
  <div class="container">
    <h1>Discover Opportunities</h1>
    <p>Find your next career move from thousands of active job listings</p>
    
    <div class="advanced-search">
      <form method="get" action="/jobs" class="search-filters">
        <div class="search-row">
          <div class="search-field">
            <i class="fas fa-search"></i>
            <input type="text" name="q" placeholder="Search jobs..." value="<%= q || '' %>">
          </div>
          <div class="search-field">
            <i class="fas fa-map-marker-alt"></i>
            <select name="location">
              <option value="">All Locations</option>
              <option value="remote">Remote</option>
              <option value="hybrid">Hybrid</option>
              <option value="onsite">On-site</option>
            </select>
          </div>
          <div class="search-field">
            <i class="fas fa-briefcase"></i>
            <select name="category">
              <option value="">All Categories</option>
              <option value="tech">Technology</option>
              <option value="marketing">Marketing</option>
              <option value="sales">Sales</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </form>
    </div>
  </div>
</section>

<section class="jobs-content">
  <div class="container">
    <div class="jobs-layout">
      <aside class="filters-sidebar">
        <h3>Filters</h3>
        <div class="filter-group">
          <h4>Salary Range</h4>
          <div class="checkbox-group">
            <label><input type="checkbox"> $0 - $50k</label>
            <label><input type="checkbox"> $50k - $100k</label>
            <label><input type="checkbox"> $100k - $150k</label>
            <label><input type="checkbox"> $150k+</label>
          </div>
        </div>
        <div class="filter-group">
          <h4>Job Type</h4>
          <div class="checkbox-group">
            <label><input type="checkbox"> Full-time</label>
            <label><input type="checkbox"> Part-time</label>
            <label><input type="checkbox"> Contract</label>
            <label><input type="checkbox"> Internship</label>
          </div>
        </div>
      </aside>

      <main class="jobs-main">
        <div class="jobs-toolbar">
          <div class="results-info">
            <span class="results-count"><%= jobs.length %> jobs found</span>
          </div>
          <div class="view-options">
            <button class="view-btn active" data-view="list">
              <i class="fas fa-list"></i>
            </button>
            <button class="view-btn" data-view="grid">
              <i class="fas fa-th"></i>
            </button>
          </div>
        </div>

        <div class="jobs-grid" id="jobsContainer">
          <% if (jobs.length === 0) { %>
            <div class="empty-state">
              <i class="fas fa-search"></i>
              <h3>No jobs found</h3>
              <p>Try adjusting your search criteria</p>
            </div>
          <% } %>
          
          <% jobs.forEach((job, index) => { %>
            <article class="job-card-modern" data-job-id="<%= job.id %>">
              <div class="job-header">
                <div class="company-info">
                  <div class="company-avatar">
                    <%= job.companyname.charAt(0).toUpperCase() %>
                  </div>
                  <div>
                    <h3 class="job-title"><%= job.jobdesignation %></h3>
                    <p class="company-name"><%= job.companyname %></p>
                  </div>
                </div>
                <button class="save-job-btn" onclick="toggleSaveJob('<%= job.id %>')">
                  <i class="far fa-heart"></i>
                </button>
              </div>
              
              <div class="job-meta">
                <span class="job-location">
                  <i class="fas fa-map-marker-alt"></i>
                  <%= job.joblocation %>
                </span>
                <span class="job-type">
                  <i class="fas fa-clock"></i>
                  Full-time
                </span>
                <span class="job-salary">
                  <i class="fas fa-dollar-sign"></i>
                  <%= job.salary %>
                </span>
              </div>

              <div class="job-skills">
                <% job.skillsrequired.slice(0, 3).forEach(skill => { %>
                  <span class="skill-tag"><%= skill %></span>
                <% }); %>
                <% if (job.skillsrequired.length > 3) { %>
                  <span class="skill-more">+<%= job.skillsrequired.length - 3 %></span>
                <% } %>
              </div>

              <div class="job-footer">
                <div class="job-stats">
                  <span class="posted-time">
                    <i class="fas fa-calendar"></i>
                    Posted <%= job.jobposted %>
                  </span>
                  <span class="applicants-count">
                    <i class="fas fa-user"></i>
                    <%= job.applicants.length %> applicants
                  </span>
                </div>
                
                <div class="job-actions">
                  <a href="/jobs/<%= job.id %>" class="btn btn-outline btn-small">
                    View Details
                  </a>
                  <% if (user && user.id === job.ownerId) { %>
                    <div class="owner-actions">
                      <a href="/jobs/<%= job.id %>/update" class="btn btn-secondary btn-small">
                        <i class="fas fa-edit"></i>
                      </a>
                      <button onclick="confirmDelete('<%= job.id %>')" class="btn btn-danger btn-small">
                        <i class="fas fa-trash"></i>
                      </button>
                      <a href="/jobs/<%= job.id %>/applicants" class="btn btn-primary btn-small">
                        Applicants
                      </a>
                    </div>
                  <% } %>
                </div>
              </div>
            </article>
          <% }); %>
        </div>
      </main>
    </div>
  </div>
</section>
